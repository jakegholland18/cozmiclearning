<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit Question</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body class="fade-in">

<div class="page-title">Edit Question</div>

<div class="content-box">

    <form method="POST">

        <label>Question Text</label>
        <textarea name="question_text" required>
{{ question.question_text }}
        </textarea>

        <label>Question Type</label>
        <select name="question_type" id="qtype">
            <option value="free"
                {% if question.question_type == "free" %}selected{% endif %}>
                Free Response
            </option>

            <option value="multiple_choice"
                {% if question.question_type == "multiple_choice" %}selected{% endif %}>
                Multiple Choice
            </option>
        </select>

        <div id="mc_fields"
             style="display: {% if question.question_type == 'multiple_choice' %}block{% else %}none{% endif %};">

            <label>Choice A</label>
            <input type="text" name="choice_a" value="{{ question.choice_a }}">

            <label>Choice B</label>
            <input type="text" name="choice_b" value="{{ question.choice_b }}">

            <label>Choice C</label>
            <input type="text" name="choice_c" value="{{ question.choice_c }}">

            <label>Choice D</label>
            <input type="text" name="choice_d" value="{{ question.choice_d }}">

            <label>Correct Answer</label>
            <input type="text" name="correct_answer" value="{{ question.correct_answer }}">

        </div>

        <label>Explanation</label>
        <textarea name="explanation">{{ question.explanation }}</textarea>

        <label>Difficulty</label>
        <select name="difficulty_level">
            <option value="easy" {% if question.difficulty_level == 'easy' %}selected{% endif %}>Easy</option>
            <option value="med" {% if question.difficulty_level == 'med' %}selected{% endif %}>Medium</option>
            <option value="hard" {% if question.difficulty_level == 'hard' %}selected{% endif %}>Hard</option>
        </select>

        <button class="btn-blue" type="submit">Save Changes</button>

    </form>

</div>

<script>
    document.getElementById("qtype").addEventListener("change", function () {
        const mc = document.getElementById("mc_fields");
        mc.style.display = (this.value === "multiple_choice") ? "block" : "none";
    });
</script>

</body>
</html>
